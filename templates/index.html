<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ESTUDE — MVP</title>
  <link rel="icon" type="image/png" href="/static/image/logo.png">
  <link rel="stylesheet" href="static/css/base.css">
  <link rel="stylesheet" href="static/css/auth.css">
  <link rel="stylesheet" href="static/css/app.css">
  <link rel="stylesheet" href="static/css/responsividade.css">
</head>
<body>
  <header>
  <button class="menu-toggle" id="menuToggle" aria-label="Abrir menu">
   <span></span>
   <span></span>
   <span></span>
  </button>
  <img src="/static/image/logo.png" alt="Logo" style="height: 36px;">
  <h1>ESTUDE — Jogo Institucional</h1>
</header>

  <section class="auth" id="auth">
    <div class="top">
      <div class="left">
        <div class="role-tabs">
          <button class="active" data-role="aluno">Aluno</button>
          <button data-role="professor">Professor</button>
          <button data-role="coordenador">Coordenador</button>
        </div>
        <div id="form-aluno">
          <div class="row">
            <div>
              <label>CPF</label><input id="a_cpf" type="number" placeholder="Somente números" />
            </div>
            <div>
              <label>Senha</label><input id="a_senha" type="password" />
            </div>
          </div>
          <div class="actions">
            <button class="btn azul" onclick="login('aluno', this)">Entrar</button>
          </div>
          <div class="muted">
            Se for seu primeiro acesso, procure a coordenadora da sua escola para realizar o cadastro.
          </div>
        </div>

        <div id="form-professor" class="hidden">
          <div class="row">
            <div><label>CPF</label><input id="p_cpf" type="number" placeholder="Somente números" /></div>
            <div>
              <label>Senha</label><input id="p_senha" type="password" />
            </div>
          </div>
          <div class="actions">
            <button class="btn azul" onclick="login('professor', this)">
              Entrar
            </button>
          </div>
          <div class="muted">
            Se for seu primeiro acesso, procure a coordenadora da sua escola para realizar o cadastro.
          </div>
        </div>

        <div id="form-coordenador" class="hidden">
          <div class="row">
            <div><label>CPF</label><input id="c_cpf" type="number" placeholder="Somente números" /></div>
            <div><label>Senha</label><input id="c_senha" type="password" /></div>
          </div>
          <div class="actions">
            <button class="btn verde" onclick="register('coordenador')">
              Cadastrar
            </button>
            <button class="btn azul" onclick="login('coordenador', this)">
              Entrar
            </button>
          </div>
        </div>
      </div>
      <div class="right">
        <h2 style="margin: 0 0 8px">Bem-vindo ao ESTUDE</h2>
        <p>
          Gamificação para apoiar professores e coordenadores, e engajar
          alunos com quizzes de 5 alternativas e níveis adaptativos.
        </p>
        <ul>
          <li>Crie salas e matérias</li>
          <li>Envie conteúdos (PDF, imagens, vídeos)</li>
          <li>Monte bancos de questões por nível</li>
          <li>Monitore acessos e desempenho</li>
        </ul>
      </div>
    </div>
  </section>

  <section class="app" id="app">
    <div class="menu-overlay" id="menuOverlay"></div>
    <div class="layout">
      <aside class="sidebar" id="sidebar">
        <div class="userbox">
          <div id="ub-nome" style="font-weight: 600"></div>
          <div id="ub-role" class="muted" style="color: #d1fae5"></div>
        </div>
        <div class="menu" id="menu-aluno" class="hidden">
          <h4>Aluno</h4>
          <button data-tab="a_materias">Escolher Matéria</button>
          <button data-tab="a_desafio">Desafio da Turma </button>
          <button data-tab="a_ranking">Ranking</button>
        </div>
        <div class="menu" id="menu-professor" class="hidden">
          <h4>Professor</h4>
          <button data-tab="p_dashboard">Estatísticas da Turma</button>
          <button data-tab="p_materias">Criar/Ver Matérias</button>
          <button data-tab="p_questoes">Perguntas e Distribuição</button>
          <button data-tab="p_biblioteca">Biblioteca de Perguntas</button>
          <button data-tab="p_ver_sala">Ver Alunos da Sala</button>
          <button data-tab="p_conteudos">Conteúdos</button>
        </div>
        <div class="menu" id="menu-coordenador" class="hidden">
          <h4>Coordenador</h4>
          <button data-tab="c_dash">Dashboard</button>
          <button data-tab="c_prof">Gerenciar Professores</button>
          <button data-tab="c_alunos">Gerenciar Alunos</button>
          <button data-tab="c_salas">Gerenciar Salas</button>
          <button data-tab="c_materias">Gerenciar Matéria</button>
          <button data-tab="c_banners">Banners de Provas</button>
        </div>
        <div class="menu">
          <h4>Sessão</h4>
          <button onclick="logout()">Sair</button>
        </div>
      </aside>

      <main class="content">
        <section id="a_materias" class="hidden">
          <h2 class="title">Matérias</h2>
          <div class="notice">
            Escolha uma matéria para acessar <b>Conteúdos</b> e <b>Jogo</b>.
          </div>
          <div class="grid2">
            <div class="card">
          <label>Minha Sala</label>
          <div id="a_nomeSala" style="padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; background-color: #f8fafc; min-height: 44px;">
              Carregando... 
          </div>
          <div class="muted" id="a_salaMutedText">
              Se não estiver vinculado a uma sala, contacte o coordenador ou professor.
          </div>
        </div>
            <div class="card">
              <label>Matérias da sala</label>
              <select id="a_selMateria"></select>
              <div class="actions" style="margin-top: 10px">
                <button class="btn verde" onclick="abrirMateriaAluno()">
                  Abrir
                </button>
              </div>
            </div>
          </div>

          <div id="a_materiaView" class="hidden" style="margin-top: 14px">
            <div class="grid2">
              <div class="card">
                <h3 style="margin: 0 0 6px">Conteúdos</h3>
                <div id="a_conteudos"></div>
              </div>
              <div class="card">
                <h3 style="margin: 0 0 6px">Jogo (Quiz)</h3>
                <div class="progress">
                  <div id="a_prog"></div>
                </div>
                <p id="a_nivel">Nível: Fácil</p>
                <div class="quizbox">
                  <div
                    id="a_q"
                    style="font-weight: 600; margin-bottom: 8px"
                  ></div>
                  <div id="a_ans" class="answers"></div>
                  <div id="a_fb" class="muted" style="margin-top: 6px"></div>
                  <div class="actions" style="margin-top: 8px">
                    <button class="btn outline" onclick="quizTentarNovamente()">
                      Reiniciar Jogo
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <h3 style="margin-top: 18px">Banners de Provas</h3>
            <div class="student-layout">
              <div class="banner-col" id="a_bannersCol"></div>
              <div class="card">
                <h3 style="margin-top: 0">Informações</h3>
                <p class="muted">
                  Selecione um banner à esquerda para ver os detalhes.
                </p>
                <div id="a_bannerInfo"></div>
              </div>
            </div>
          </section>

         <section id="a_desafio" class="hidden">
  <h2 class="title">Desafio da Turma</h2>
  <div class="card" style="max-width: 700px; margin: auto;">
    <h3 style="margin: 0 0 6px">Quiz valendo Ranking</h3>
    <p class="muted" style="margin-bottom: 12px;">
      Prepare-se! Você receberá perguntas de **todas as matérias** da sua turma.
      Seu objetivo é acertar o máximo em sequência. Se errar, sua pontuação vai para o ranking!
    </p>

    <div id="d_start_view">
      <button class="btn verde" style="width: 100%;" onclick="desafioStart()">
        Começar Desafio!
      </button>
    </div>

    <div id="d_quiz_view" class="hidden">
      <div class="progress">
        <div id="d_prog"></div>
      </div>
      <p id="d_nivel">Nível: Fácil</p>
      <div class="quizbox">
        <div
          id="d_q"
          style="font-weight: 600; margin-bottom: 8px"
        ></div>
        <div id="d_ans" class="answers"></div>
        <div id="d_fb" class="muted" style="margin-top: 6px"></div>
      </div>
    </div>

  </div>
</section>

          <section id="p_ver_sala" class="hidden">
            <h2 class="title">Sala — Alunos</h2>
            <div class="grid2">
              <div class="card">
                <label>Minha sala</label>
                <select id="p_salaView"></select>
                <button
                  class="btn outline"
                  style="margin-top: 8px"
                  onclick="renderAlunosSalaProfessor()"
                >
                  Ver alunos
                </button>
              </div>
              <div class="card">
                <h3 style="margin-top: 0">Alunos cadastrados</h3>
                <table>
                  <thead>
                    <tr>
                      <th>Nome</th>
                      <th>Matrícula</th>
                    </tr>
                  </thead>
                  <tbody id="p_tbAlunos"></tbody>
                </table>
              </div>
            </div>
          </section>

          <section id="a_ranking" class="hidden">
            <h2 class="title">Ranking</h2>
            <table class="ranktable">
              <thead>
                <tr>
                  <th>Posição</th>
                  <th>Nome</th>
                  <th>Sequência Máx.</th>
                </tr>
              </thead>
              <tbody id="a_tbRanking"></tbody>
            </table>
          </section>

          <section id="p_materias" class="hidden">
            <h2 class="title">Criar / Ver Matérias</h2>
            <div class="grid2">
              <div class="card">
                <label>Sala</label>
                <select id="p_selSala"></select>
                <label style="margin-top: 8px">Nome da matéria</label>
                <input id="p_matNome" placeholder="Ex.: Matemática 9º A" />
                <button
                  class="btn verde"
                  style="margin-top: 10px"
                  onclick="criarMateria('professor')"
                >
                  Criar Matéria
                </button>
              </div>
              <div class="card">
                <h3 style="margin: 0 0 6px">Minhas matérias</h3>
                <div id="p_listaMaterias" class="cards"></div>
              </div>
            </div>
          </section>

<section id="p_questoes" class="hidden">
  <h2 class="title">Perguntas da Matéria</h2>
  <div class="form-card">
    <div class="form-group">
      <label>Matéria</label>
      <select id="p_q_materia"></select>
    </div>

    <div class="form-group">
      <label>Nível de Dificuldade</label>
      <select id="p_q_nivel">
        <option value="facil">Fácil</option>
        <option value="medio">Médio</option>
        <option value="dificil">Difícil</option>
      </select>
    </div>

    <div class="form-group">
      <label>Enunciado</label>
      <textarea id="p_q_enun" rows="3" placeholder="Digite a pergunta completa"></textarea>
    </div>

    <div class="form-group">
      <label>Imagem (opcional)</label>
      <input id="p_q_img" type="file" accept="image/*" />
      <img id="p_q_preview" class="preview" />
    </div>
    
    <div class="form-group">
  <label>Explicação / Resolução (Aparece ao errar)</label>
  <textarea id="p_q_expl" rows="3" placeholder="Explique o porquê da resposta correta..."></textarea>
</div>
    <div class="form-group alternativas">
      <label>Alternativas</label>
      <div class="alt">
        <span>A)</span> <input id="p_q_a0" placeholder="Alternativa A" />
      </div>
      <div class="alt">
        <span>B)</span> <input id="p_q_a1" placeholder="Alternativa B" />
      </div>
      <div class="alt">
        <span>C)</span> <input id="p_q_a2" placeholder="Alternativa C" />
      </div>
      <div class="alt">
        <span>D)</span> <input id="p_q_a3" placeholder="Alternativa D" />
      </div>
      <div class="alt">
        <span>E)</span> <input id="p_q_a4" placeholder="Alternativa E" />
      </div>
    </div>

    <div class="form-group">
      <label>Alternativa Correta</label>
      <select id="p_q_cor">
        <option value="0">A</option>
        <option value="1">B</option>
        <option value="2">C</option>
        <option value="3">D</option>
        <option value="4">E</option>
      </select>
    </div>

    <div class="actions">
      <button id="btn_add_pergunta" class="btn verde">Adicionar Pergunta</button>
    </div>
  </div>

<div class="card" style="margin-top: 24px;">
    <h3 style="margin: 0 0 12px;">Perguntas Cadastradas</h3>
    <p class="muted" id="p_q_lista_info">Selecione uma matéria acima para ver as perguntas.</p>
    <div class="card" style="margin-top: 24px;">
    <h3 style="margin: 0 0 12px;">Perguntas Cadastradas</h3>
   <div class="form-group" style="margin-bottom: 12px;">
      <label for="p_q_filtro_materia">Filtrar por Matéria</label>
      <select id="p_q_filtro_materia">
        <option value="">-- Selecione uma matéria --</option>
      </select>
    </div>
    <p class="muted" id="p_q_lista_info">Selecione uma matéria acima para ver as perguntas.</p>
    
    <div id="p_q_resumo" style="margin-bottom: 12px;"></div>
    <div style="overflow-x: auto;">
      <table>
        <thead>
    <div style="overflow-x: auto;">
      <table>
        <thead>
          <tr>
            <th>Enunciado</th>
            <th>Nível</th>
            <th style="width: 150px; text-align: right;">Ações</th>
          </tr>
        </thead>
        <tbody id="p_q_lista_tbody">
          </tbody>
      </table>
    </div>
  </div>
</section>


          <section id="p_conteudos" class="hidden">
            <h2 class="title">Conteúdos da Matéria</h2>
            <div class="grid2">
              <div class="card">
                <div class="form-grid-2">
                  <div class="form-group">
                    <label>Matéria</label>
                    <select id="p_c_materia"></select>
                  </div>
                  
                  <div class="form-group">
                    <label>Título do Conteúdo</label>
                    <input id="p_c_nome" type="text" placeholder="Ex: Vídeo sobre Revolução Francesa" />
                  </div>
                </div> <div class="form-group">
                  <label>Adicionar arquivo (Opcional)</label>
                  <input id="p_c_file" type="file" />
                </div>
                
                <div class="form-group">
                  <label>Adicionar Texto (Opcional)</label>
                  <textarea id="p_c_texto" rows="4" placeholder="Digite uma descrição ou o conteúdo em texto aqui..."></textarea>
                </div>
                
                <div class="form-group">
                  <label>Adicionar Link (Opcional)</label>
                  <input id="p_c_link" type="text" placeholder="https://www.youtube.com/watch?v=..." />
                </div>
                
                <button
                  class="btn verde"
                  style="margin-top: 10px; width: 100%;"
                  onclick="adicionarConteudo(this)"
                >
                  Enviar Conteúdo
                </button>
                </div>
              <div class="card">
                <h3 style="margin: 0 0 8px">Arquivos e Conteúdos</h3>
                <div id="p_c_lista"></div>
              </div>
            </div>
          </section>

          <section id="p_biblioteca" class="hidden">
  <h2 class="title">Biblioteca de Perguntas</h2>
  <p class="muted" style="text-align: center; max-width: 600px; margin: -10px auto 16px;">
    Aqui pode ver perguntas de todas as matérias do sistema e copiá-las para uma das suas matérias.
  </p>

  <div class="card">
    <div class="grid2">
      <div class="form-group">
        <label for="p_bib_origem">Ver perguntas da Matéria (Origem):</label>
        <select id="p_bib_origem">
          <option value="">-- Selecione uma matéria --</option>
        </select>
      </div>
      <div class="form-group">
        <label for="p_bib_destino">Copiar para Minha Matéria (Destino):</label>
        <select id="p_bib_destino">
          <option value="">-- Selecione uma das SUAS matérias --</option>
        </select>
      </div>
    </div>

    <hr style="margin: 20px 0;">

    <h3 style="margin: 0 0 12px;">Perguntas da Matéria de Origem</h3>
    <div style="overflow-x: auto;">
      <table>
        <thead>
          <tr>
            <th>Enunciado</th>
            <th>Nível</th>
            <th style="width: 120px; text-align: right;">Ação</th>
          </tr>
        </thead>
        <tbody id="p_bib_lista_tbody">
          <tr><td colspan="3" class="muted">Selecione uma matéria de origem para ver as perguntas.</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<section id="p_dashboard" class="hidden">
  <h2 class="title">Dashboard Pedagógico</h2>

  <div class="card">
    <label>Selecione a Matéria para analisar:</label>
    <select id="p_dash_materia">
       <option value="">-- Selecione --</option>
    </select>
  </div>

  <div id="p_dash_content" class="hidden" style="margin-top: 20px;">
    <div class="grid2">
      <div class="card" style="background: #e0f2fe; border: 1px solid #bae6fd;">
         <h4 style="margin:0; color:#0369a1;">Taxa de Acerto Global</h4>
         <div id="dash_taxa" style="font-size: 32px; font-weight:bold; color:#0284c7;">0%</div>
      </div>
      <div class="card">
         <h4 style="margin:0;">Total de Respostas</h4>
         <div id="dash_total" style="font-size: 32px; font-weight:bold;">0</div>
      </div>
    </div>

    <div class="card" style="margin-top: 16px; border-left: 4px solid #ef4444;">
       <h3 style="color: #b91c1c;">⚠️ Alunos que precisam de atenção</h3>
       <p class="muted">Alunos com aproveitamento abaixo de 40%.</p>
       <ul id="dash_alunos_risco" style="padding-left: 20px; margin-bottom:0;"></ul>
    </div>

    <div class="card" style="margin-top: 16px;">
       <h3>Perguntas Mais Difíceis (Top 5)</h3>
       <div style="overflow-x: auto;">
         <table style="font-size: 13px;">
           <thead>
             <tr>
               <th>Enunciado</th>
               <th>Nível</th>
               <th>Erros</th>
               <th>% Erro</th>
             </tr>
           </thead>
           <tbody id="dash_tb_erros"></tbody>
         </table>
       </div>
    </div>
  </div>
</section>

          <section id="c_dash" class="hidden">
            <h2 class="title">Dashboard — Monitoramento</h2>
            <div class="grid3">
              <div class="card">
                <strong>Total Logins</strong>
                <div id="d1" style="font-size: 28px; margin-top: 6px">0</div>
              </div>
              <div class="card">
                <strong>Questões Respondidas</strong>
                <div id="d2" style="font-size: 28px; margin-top: 6px">0</div>
              </div>
              <div class="card">
                <strong>Matérias</strong>
                <div id="d3" style="font-size: 28px; margin-top: 6px">0</div>
              </div>
            </div>
            <div class="grid2" style="margin-top: 12px">
              <div class="card">
                <h3 style="margin: 0 0 10px">Acessos</h3>
                <table>
                  <thead>
                    <tr>
                      <th>Usuário</th>
                      <th>Papel</th>
                    </tr>
                  </thead>
                  <tbody id="c_tbLogs"></tbody>
                </table>
              </div>
              <div class="card-dash">
                <h3 style="margin: 0 0 6px">Logins</h3>
                <canvas id="c_chart" class="chart"></canvas>
              </div>
              <div class="card-ranking">
                <h3 style="margin: 0 0 6px">Resetar o Ranking</h3>
                <button class="btn-ranking" onclick="resetarRanking()">
                  Resetar Ranking
                </button>
              </div>
            </div>
          </section>

          <section id="c_prof" class="hidden">
  <h2 class="title">Gerenciar Professores</h2>
  
  <div class="coord-section">
    <!-- Card de Criação -->
    <div class="coord-form-card">
      <h3>Criar Professor</h3>
      <div class="form-group">
        <label>Nome</label>
        <input id="c_p_nome" />
      </div>
      <div class="form-group">
        <label>CPF</label>
        <input id="c_p_cpf" type="number" />
      </div>
      <div class="form-group">
        <label>Matrícula</label>
        <input id="c_p_mat" />
      </div>
      <div class="form-group">
        <label>Senha</label>
        <input id="c_p_senha" type="password" />
      </div>
      <div class="actions">
        <button class="btn verde" onclick="coordCriarProfessor()">
          Cadastrar Professor
        </button>
      </div>
    </div>

    <!-- Card de Tabela -->
    <div class="coord-table-card">
      <h3>Professores Cadastrados</h3>
      <table>
        <thead>
          <tr>
            <th>Nome</th>
            <th>CPF</th>
            <th>Matrícula</th>
            <th style="text-align: right;">Ações</th>
          </tr>
        </thead>
        <tbody id="c_tbProfs"></tbody>
      </table>
    </div>
  </div>
</section>


          <section id="c_alunos" class="hidden">
  <h2 class="title">Gerenciar Alunos</h2>
  
  <div class="coord-section">
    <!-- Card de Criação -->
    <div class="coord-form-card">
      <h3>Criar Aluno</h3>
      <div class="form-group">
        <label>Nome</label>
        <input id="c_a_nome" />
      </div>
      <div class="form-group">
        <label>CPF</label>
        <input id="c_a_cpf" type="number" />
      </div>
      <div class="form-group">
        <label>Matrícula</label>
        <input id="c_a_mat" />
      </div>
      <div class="form-group">
        <label>Senha</label>
        <input id="c_a_senha" type="password" />
      </div>
      <div class="actions">
        <button class="btn verde" onclick="coordCriarAluno()">
          Cadastrar Aluno
        </button>
      </div>
    </div>

    <!-- Card de Tabela -->
    <div class="coord-table-card">
      <h3>Alunos Cadastrados</h3>
      <table>
        <thead>
          <tr>
            <th>Nome</th>
            <th>CPF</th>
            <th>Matrícula</th>
            <th>Sala</th>
            <th style="text-align: right;">Ações</th>
          </tr>
        </thead>
        <tbody id="c_tbAlunos"></tbody>
      </table>
    </div>
  </div>

  <!-- Card de Vinculação -->
  <div class="coord-vincular-card">
    <h3>Vincular Aluno à Sala</h3>
    <div class="form-group">
      <label>Selecione o Aluno</label>
      <select id="c_vincular_aluno"></select>
    </div>
    <div class="form-group">
      <label>Selecione a Sala</label>
      <select id="c_vincular_sala"></select>
    </div>
    <div class="actions">
      <button class="btn verde" onclick="vincularAlunoASala()">
        Vincular Aluno
      </button>
    </div>
  </div>
</section>


  <section id="c_salas" class="hidden">
  <h2 class="title">Gerenciar Salas</h2>
  
  <div class="coord-section">
    <!-- Card de Criação -->
    <div class="coord-form-card">
      <h3>Criar Sala</h3>
      <div class="form-group">
        <label>Nome da Sala (ex.: 9º A)</label>
        <input id="c_s_nome" />
      </div>
      <div class="form-group">
        <label>Capacidade</label>
        <input id="c_s_cap" type="number" value="30" />
      </div>
      <div class="actions">
        <button class="btn verde" onclick="criarSala()">
          Criar Sala
        </button>
      </div>
    </div>

    <!-- Card de Tabela -->
    <div class="coord-table-card">
      <h3>Salas Cadastradas</h3>
      <table>
        <thead>
          <tr>
            <th>Nome</th>
            <th>Capacidade</th>
            <th style="text-align: right;">Ações</th>
          </tr>
        </thead>
        <tbody id="c_tbSalas"></tbody>
      </table>
    </div>
  </div>
</section>


          <section id="c_materias" class="hidden">
            <h2 class="title">Gerenciar Matérias</h2>
            <div class="card">
              <h3 style="margin: 0 0 6px">Matérias Cadastradas</h3>
              <div style="overflow-x: auto;">
                <table>
                  <thead>
                    <tr>
                      <th>Nome</th>
                      <th>Sala</th>
                      <th style="width: 120px;">Ações</th>
                    </tr>
                  </thead>
                  <tbody id="c_m_list_table">
                    </tbody>
                </table>
              </div>
            </div>
            </section>

             <section id="c_banners" class="hidden">
            <h2 class="title">Banners de Provas</h2>
            <div class="grid2">
              <div class="card">
                <label>Imagem</label><input id="ban_img" type="file" accept="image/*" />
                <label style="margin-top: 8px">Título</label
                ><input id="ban_tit" placeholder="PAEBES" />
                <div class="row">
                  <div>
                    <label>Data</label
                    ><input id="ban_data" type="date" />
                  </div>
                  <div>
                    <label>Hora</label
                    ><input id="ban_hora" type="time" />
                  </div>
                </div>
                <label style="margin-top: 8px">Local</label
                ><input id="ban_local" placeholder="Auditório / Escola" />
                <label style="margin-top: 8px">Matérias da prova</label
                ><input id="ban_mats" placeholder="Matemática; Português; ..." />
                <label style="margin-top: 8px">Dicas</label
                ><input id="ban_dicas" placeholder="Revisar frações, leitura..." />
                <button
                  class="btn verde"
                  style="margin-top: 10px"
                  onclick="salvarBanner()"
                >
                  Salvar Banner
                </button>
              </div>
              <div class="card">
                <h3 style="margin: 0 0 6px">Pré-visualização (até 3)</h3>
                <div id="c_bannersList" class="banner-col"></div>
              </div>
            </div>
          </section>
        </main>
      </div>
    </section>

        </main>
      </div>
    </section>

    <section id="c_register_form" class="hidden auth">
    <div class="top">
        <div class="left">
            <h3>Cadastro de Coordenador</h3>
            <p class="muted">Preencha os dados para criar uma nova conta de coordenador.</p>
            <div class="row">
                <div><label>Nome</label><input id="reg_c_nome" /></div>
                <div><label>CPF</label><input id="reg_c_cpf" type="number" /></div>
            </div>
            <div class="row">
                <div><label>Matrícula</label><input id="reg_c_mat" /></div>
                <div><label>Senha</label><input id="reg_c_senha" type="password" /></div>
            </div>
            <div class="row" style="margin-top: 12px;"> <div> 
                <label>Chave Mestre</label>
                <input id="reg_c_masterkey" type="password" placeholder="Chave de segurança" />
            </div>
            <div></div> </div>
            <div class="actions">
            <button class="btn verde" onclick="submitRegister('coordenador', this)">...</button>
            <button class="btn outline" onclick="cancelarCadastro()"> 
                Cancelar
            </button>
        </div>
        </div>
        <div class="right">
            <h2>Processo de Cadastro</h2>
            <p>Este processo é exclusivo e protegido por senha mestra, garantindo a integridade dos dados de acesso à plataforma.</p>
            <ul>
                <li>Segurança reforçada</li>
                <li>Controle de acesso exclusivo</li>
                <li>Prevenção de cadastros não autorizados</li>
            </ul>
        </div>
    </div>
</section>

<section id="c_edit_form" class="hidden auth">
    <div class="top">
        <div class="left">
            <h3>Editar Usuário</h3>
            <p class="muted">Altere as informações do usuário selecionado.</p>
            <input type="hidden" id="edit_id">
            <input type="hidden" id="edit_role">
            <div class="row">
                <div><label>Nome</label><input id="edit_nome" /></div>
                <div><label>CPF</label><input id="edit_cpf" type="number" /></div>
            </div>
            <div class="row">
                <div><label>Matrícula</label><input id="edit_mat" /></div>
                <div id="div_promote_assistente" style="display: flex; align-items: center; padding-top: 20px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input id="edit_is_assistente" type="checkbox" style="width: auto;" />
                <span>Promover a Assistente</span>
              </label>
            </div>
            </div>
        <div class="row">
                <div><label>Senha</label><input id="edit_senha" type="password" /></div>
            </div>
            <div class="actions">
                <button class="btn verde" onclick="salvarEdicao(this)">
                    Salvar Edição
                </button>
                <button class="btn" onclick="cancelarEdicao()">
                    Cancelar
                </button>
            </div>
        </div>
        <div class="right">
            <h2>Edição de Dados</h2>
            <p>Altere as informações de um usuário existente de forma segura.</p>
        </div>
    </div>
</section>
<section id="c_edit_sala_form" class="hidden auth">
    <div class="top">
        <div class="left">
            <h3>Editar Sala</h3>
            <p class="muted">Altere as informações da sala selecionada.</p>
            <input type="hidden" id="edit_sala_id">
            <div class="row">
                <div><label>Nome da Sala</label><input id="edit_sala_nome" /></div>
                <div><label>Capacidade</label><input id="edit_sala_cap" type="number" /></div>
            </div>
            <div class="actions">
                <button class="btn verde" onclick="salvarEdicaoSala()">
                    Salvar Edição
                </button>
                <button class="btn outline" onclick="cancelarEdicaoSala()">
                    Cancelar
                </button>
            </div>
        </div>
        <div class="right">
            <h2>Edição de Salas</h2>
            <p>Altere o nome e a capacidade de uma sala existente.</p>
        </div>
    </div>
</section>

<section id="c_edit_materia_form" class="hidden auth">
    <div class="top">
        <div class="left">
            <h3>Editar Matéria</h3>
            <p class="muted">Altere as informações da matéria selecionada.</p>
            <input type="hidden" id="edit_materia_id">
            <div class
="row">
                <div>
                  <label>Nome da Matéria</label>
                  <input id="edit_materia_nome" />
                </div>
                <div>
                  <label>Sala</label>
                  <select id="edit_m_selSala"></select>
                </div>
            </div>
            <div class="actions">
                <button class="btn verde" onclick="salvarEdicaoMateria()">
                    Salvar Edição
                </button>
                <button class="btn outline" onclick="cancelarEdicaoMateria()">
                    Cancelar
                </button>
            </div>
        </div>
        <div class="right">
            <h2>Edição de Matérias</h2>
            <p>Altere o nome e a sala de uma matéria existente.</p>
        </div>
    </div>
</section>

<section id="p_edit_conteudo_form" class="hidden auth">
    <div class="top">
        <div class="left">
            <h3>Editar Conteúdo</h3>
            <p class="muted">Altere as informações do conteúdo selecionado.</p>
            <input type="hidden" id="edit_conteudo_id">
            <input type="hidden" id="edit_conteudo_materia_id">
            
            <div class="form-group">
              <label>Título do Conteúdo</label>
              <input id="edit_c_nome" type="text" placeholder="Ex: Vídeo sobre Revolução Francesa" />
            </div>
            
            <div class="form-group">
              <label>Adicionar/Substituir arquivo (Opcional)</label>
              <input id="edit_c_file" type="file" />
              <span class="muted" id="edit_c_file_info">Deixe em branco para manter o arquivo atual.</span>
            </div>
            
            <div class="form-group">
              <label>Adicionar Texto (Opcional)</label>
              <textarea id="edit_c_texto" rows="4" placeholder="Digite uma descrição ou o conteúdo em texto aqui..."></textarea>
            </div>
            
            <div class="form-group">
              <label>Adicionar Link (Opcional)</label>
              <input id="edit_c_link" type="text" placeholder="https://www.youtube.com/watch?v=..." />
            </div>

            <div class="actions">
                <button class="btn verde" onclick="salvarEdicaoConteudo(this)">
                    Salvar Edição
                </button>
                <button class="btn outline" onclick="cancelarEdicaoConteudo()">
                    Cancelar
                </button>
            </div>
        </div>
        <div class="right">
            <h2>Edição de Conteúdo</h2>
            <p>Altere os dados do conteúdo. Se enviar um novo arquivo, ele substituirá o antigo (se houver).</p>
        </div>
    </div>
</section>

<section id="p_edit_pergunta_form" class="hidden auth">
    <div class="top">
        <div class="left">
            <h3>Editar Pergunta</h3>
            <p class="muted">Altere as informações da pergunta selecionada.</p>
            <input type="hidden" id="edit_p_id">
            <input type="hidden" id="edit_p_materia_id_original">

            <div class="form-group">
              <label>Matéria (não pode ser alterada)</label>
              <input id="edit_p_materia_nome" readonly style="background-color: #f3f4f6;" />
            </div>

            <div class="form-group">
              <label>Nível de Dificuldade</label>
              <select id="edit_p_nivel">
                <option value="facil">Fácil</option>
                <option value="medio">Médio</option>
                <option value="dificil">Difícil</option>
              </select>
            </div>

            <div class="form-group">
              <label>Enunciado</label>
              <textarea id="edit_p_enun" rows="3" placeholder="Digite a pergunta completa"></textarea>
            </div>

            <div class="form-group">
              <label>Imagem (opcional)</label>
              <input id="edit_p_img" type="file" accept="image/*" />
              <img id="edit_p_preview" class="preview" style="max-width: 200px; margin-top: 8px;" />
              <span class="muted" id="edit_p_img_info">Envie um novo arquivo para substituir o atual.</span>
            </div>
               
            <div class="form-group">
  <label>Explicação / Resolução</label>
  <textarea id="edit_p_expl" rows="3" placeholder="Explique a resposta..."></textarea>
</div>

            <div class="form-group alternativas">
              <label>Alternativas</label>
              <div class="alt"><span>A)</span> <input id="edit_p_a0" /></div>
              <div class="alt"><span>B)</span> <input id="edit_p_a1" /></div>
              <div class="alt"><span>C)</span> <input id="edit_p_a2" /></div>
              <div class="alt"><span>D)</span> <input id="edit_p_a3" /></div>
              <div class="alt"><span>E)</span> <input id="edit_p_a4" /></div>
            </div>

            <div class="form-group">
              <label>Alternativa Correta</label>
              <select id="edit_p_cor">
                <option value="0">A</option>
                <option value="1">B</option>
                <option value="2">C</option>
                <option value="3">D</option>
                <option value="4">E</option>
              </select>
            </div>

            <div class="actions">
                <button class="btn verde" onclick="salvarEdicaoPergunta(this)">
                    Salvar Edição
                </button>
                <button class="btn outline" onclick="cancelarEdicaoPergunta()">
                    Cancelar
                </button>
            </div>
        </div>
        <div class="right">
            <h2>Edição de Pergunta</h2>
            <p>Altere os dados da pergunta. Se enviar uma nova imagem, ela substituirá a antiga.</p>
        </div>
    </div>
</section>
<section id="c_edit_banner_form" class="hidden auth">
    <div class="top">
        <div class="left">
            <h3>Editar Banner</h3>
            <input type="hidden" id="edit_ban_id">
            
            <div class="form-group">
              <label>Imagem (Opcional)</label>
              <input id="edit_ban_img" type="file" accept="image/*" />
              <span class="muted" id="edit_ban_img_info"></span>
            </div>

            <div class="form-group">
              <label>Título</label>
              <input id="edit_ban_tit" />
            </div>

            <div class="row">
              <div>
                <label>Data</label><input id="edit_ban_data" type="date" />
              </div>
              <div>
                <label>Hora</label><input id="edit_ban_hora" type="time" />
              </div>
            </div>

            <div class="form-group">
              <label>Local</label>
              <input id="edit_ban_local" />
            </div>
            <div class="form-group">
              <label>Matérias</label>
              <input id="edit_ban_mats" />
            </div>
            <div class="form-group">
              <label>Dicas</label>
              <input id="edit_ban_dicas" />
            </div>

            <div class="actions">
                <button class="btn verde" onclick="salvarEdicaoBanner(this)">
                    Salvar Edição
                </button>
                <button class="btn outline" onclick="cancelarEdicaoBanner()">
                    Cancelar
                </button>
            </div>
        </div>
        <div class="right">
            <h2>Editar Evento</h2>
            <p>Atualize as informações da prova ou evento.</p>
        </div>
    </div>
</section>

  <script src="static/js/api.js"></script>    
  <script src="static/js/storage.js"></script>
  <script src="static/js/util.js"></script>
  <script src="static/js/auth.js"></script>
  <script src="static/js/aluno.js"></script>
  <script src="static/js/professor.js"></script>
  <script src="static/js/coordenador.js"></script>
    <script>
    // Substitua pelo IP público real que você anotou
    window.API_BASE = 'http://54.210.61.239:5000S';
    </script>

    <script>
      let state = {
        user: null,
        mode: "login",
      };

      refreshAllSelectsAsync();
      bindRoleTabs();
      restoreSession();

      function renderSalasCoordOnMaterias() {
        fillSelect("c_m_selSala", LS.get("salas"));
      }
    </script>

   <script>
    // ========================================
    // MENU HAMBÚRGUER MOBILE (INLINE)
    // ========================================
    (function() {
      'use strict';

      function initMobileMenu() {
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const menuOverlay = document.getElementById('menuOverlay');

        if (!menuToggle || !sidebar || !menuOverlay) {
          console.warn('[Menu Mobile] Elementos não encontrados');
          return;
        }

        function isMobile() {
          return window.innerWidth <= 480;
        }

        function openMenu() {
          if (!isMobile()) return;
          sidebar.classList.add('open');
          menuOverlay.classList.add('active');
          menuToggle.classList.add('active');
          document.body.style.overflow = 'hidden';
        }

        function closeMenu() {
          sidebar.classList.remove('open');
          menuOverlay.classList.remove('active');
          menuToggle.classList.remove('active');
          document.body.style.overflow = '';
        }

        function toggleMenu() {
          if (sidebar.classList.contains('open')) {
            closeMenu();
          } else {
            openMenu();
          }
        }

        // Event: clicar no hambúrguer
        menuToggle.addEventListener('click', toggleMenu);

        // Event: clicar no overlay
        menuOverlay.addEventListener('click', closeMenu);

        // Event: clicar em botões do menu
        const menuButtons = sidebar.querySelectorAll('.menu button');
        menuButtons.forEach(function(btn) {
          btn.addEventListener('click', function() {
            if (isMobile()) {
              closeMenu();
            }
          });
        });

        // Event: redimensionar janela
        window.addEventListener('resize', function() {
          if (!isMobile() && sidebar.classList.contains('open')) {
            closeMenu();
          }
        });

        // Event: tecla ESC
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && sidebar.classList.contains('open')) {
            closeMenu();
          }
        });

        console.log('[Menu Mobile] Inicializado com sucesso');
      }

      // Inicializar quando DOM estiver pronto
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initMobileMenu);
      } else {
        initMobileMenu();
      }
    })();
    </script>
  </body>

</html>
